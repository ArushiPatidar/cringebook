<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup Page</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background: #f2f2f2;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
        }
        .signup-form {
          background: white;
          padding: 20px 30px;
          border-radius: 10px;
          box-shadow: 0 0 10px rgba(0,0,0,0.1);
          width: 350px;
        }
        h2 {
          text-align: center;
          margin-bottom: 20px;
        }
        label {
          font-weight: bold;
        }
        input {
          width: 100%;
          padding: 10px;
          margin-top: 6px;
          margin-bottom: 16px;
          border: 1px solid #ccc;
          border-radius: 6px;
        }
        button {
          width: 100%;
          padding: 12px;
          background-color: #4CAF50;
          border: none;
          color: white;
          font-size: 16px;
          border-radius: 6px;
          cursor: pointer;
        }
        button:hover {
          background-color: #45a049;
        }
        .message {
          margin-top: 10px;
          text-align: center;
          font-weight: bold;
        }
    </style>
</head>
<body>

<div class="signup-form">
    <h2>Sign Up</h2>
    <form id="signupForm">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required>

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>

        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" required>

        <label for="phone">Phone Number</label>
        <input type="text" id="phone" name="phone number " required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>

        <button type="submit">Create Account</button>
    </form>

    <div class="message" id="message"></div>
</div>

<!--<script>-->
<!--    document.getElementById("signupForm").addEventListener("submit", function(e) {-->
<!--      e.preventDefault();-->

<!--      const form = e.target;-->
<!--      const formData = new URLSearchParams();-->
<!--      formData.append("username", form.username.value);-->
<!--      formData.append("password", form.password.value);-->
<!--      formData.append("name", form.name.value);-->
<!--      formData.append("phone number ", form.phone.value); // key matches your curl exactly-->
<!--      formData.append("email", form.email.value);-->

<!--      fetch("http://"+window.location.host+"/signup", {-->
<!--        method: "POST",-->
<!--        headers: {-->
<!--          "Content-Type": "application/x-www-form-urlencoded"-->
<!--        },-->
<!--        body: formData.toString()-->
<!--      })-->
<!--      .then(res => {-->
<!--        if (res.ok) {-->
<!--          document.getElementById("message").textContent = "Signup successful!";-->
<!--          form.reset();-->
<!--        } else {-->
<!--          return res.text().then(text => { throw new Error(text || "Signup failed"); });-->
<!--        }-->
<!--      })-->
<!--      .catch(err => {-->
<!--        document.getElementById("message").textContent = "Error: " + err.message;-->
<!--      });-->
<!--    });-->
<!--</script>-->

<script>
    document.getElementById("signupForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const form = e.target;
      const formData = new URLSearchParams();
      formData.append("username", form.username.value);
      formData.append("password", form.password.value);
      formData.append("name", form.name.value);
      formData.append("phone number ", form.phone.value); // matches your backend key
      formData.append("email", form.email.value);

      fetch("http://" + window.location.host + "/signup", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: formData.toString()
      })
      .then(res => {
        if (res.ok) {
          // Optional: show success message briefly
          document.getElementById("message").textContent = "Signup successful! Redirecting...";
          setTimeout(() => {
            window.location.href = "/frontend/login.html";  // <-- Update path if needed
          }, 1500); // 1.5 second delay before redirect
        } else {
          return res.text().then(text => { throw new Error(text || "Signup failed"); });
        }
      })
      .catch(err => {
        document.getElementById("message").textContent = "Error: " + err.message;
      });
    });
</script>

</body>
</html>
